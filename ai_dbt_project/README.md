# ai_dbt_project

This dbt project transforms and documents job ads data sourced from the JobTech API. The project includes staging, dimension, and fact models, with comprehensive dbt tests and documentation to ensure data quality and transparency.

---

## Data Sources

- **job_ads_source.raw_job_ads**  
  *Raw job ads data fetched from JobTech API via the DLT pipeline. This table includes all the original fields as-is.*  
  *(See: `models/sources.yml`)*

---

## Staging Models

### stg_job_ads
- **Description:** Standard staging model that reshapes raw job ad data from the JobTech API for downstream consumption.
- **Key columns and tests:**
  - `ad_id`: Unique ID for each job ad generated by DLT.  
    *Tests: not_null, unique*
  - `publication_date`: The date when the job ad was published.  
    *Tests: not_null*
  - Other columns: number_vacancies, application_deadline, headline, description_text, duration, occupation, occupation_group, occupation_field, employer_name, workplace, employer_org_nr, region, country, municipality, experience_required, requires_drivers_license, has_car  
  *(See: `models/staging/job_ads/stg_job_ads.yml`)*

---

## Dimension Models

### dim_occupation
- **Description:** Dimension table with job-related information.
- **Key columns and tests:**
  - `occupation_id`: Surrogate key generated from occupation + group + field.  
    *Tests: not_null, unique*
  - `occupation`, `occupation_group`, `occupation_field`:  
    *Tests: not_null*

### dim_employer
- **Description:** Dimension table with employer information.
- **Key columns and tests:**
  - `employer_id`: Surrogate key from org number and municipality.  
    *Tests: not_null, unique*
  - `employer_name`, `workplace`, `employer_org_nr`, `municipality`, `region`, `country`:  
    *Tests: not_null*

### dim_job_details
- **Description:** Dimension table containing job advertisement content.
- **Key columns and tests:**
  - `job_details_id`: Surrogate key based on job ad ID.  
    *Tests: not_null, unique*
  - `ad_id`, `headline`, `description_text`:  
    *Tests: not_null*

### dim_auxilliary_attributes
- **Description:** Dimension table with auxiliary attributes like experience and driver's license.
- **Key columns and tests:**
  - `auxilliary_id`: Surrogate key based on auxiliary job attributes.  
    *Tests: not_null, unique*
  - `experience_required`, `requires_drivers_license`, `has_car`:  
    *Tests: not_null*

*(See: `models/refined/dim/_dim_models.yml`)*

---

## Fact Model

### fct_jobs
- **Description:** Fact table with job ads joined to dimension tables.
- **Key columns and tests:**
  - `employer_id`, `occupation_id`, `job_details_id`, `auxilliary_id`, `publication_date`, `number_vacancies`:  
    *Tests: not_null*
  - `application_deadline`
  
*(See: `models/refined/fct/fact_jobs.yml`)*

---

## dbt Tests

- **not_null** and **unique** tests are applied to all primary keys and important business columns to ensure data integrity.
- All dimension and fact tables have column-level tests defined in their respective YAML files.

---

## Documentation

- All models and columns are documented in YAML files.
- To generate and view the documentation locally:
  ```powershell
  dbt docs generate
  dbt docs serve
  ```
  The documentation will be available at [http://localhost:8000](http://localhost:8000) while the server is running.

---

## Project Structure

- `dbt_project.yml` – Project configuration
- `models/` – Contains all model SQL and YAML files
  - `staging/` – Staging models
  - `refined/dim/` – Dimension models
  - `refined/fct/` – Fact models
  - `sources.yml` – Source definitions

---

## How to Run

1. Install dependencies:
   ```powershell
   dbt deps
   ```
2. Build models and run tests:
   ```powershell
   dbt build
   dbt test
   ```
3. Generate and serve documentation:
   ```powershell
   dbt docs generate
   dbt docs serve
   ```

---